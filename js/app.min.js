(()=>{"use strict";function e(e,n){e.innerHTML=`<div style="padding : 40px;font-size: inherit;">Error: ${n}</div>`}function n(e){return{day:e.slice(e.lastIndexOf("-")+1),month:["January","February","March","April","May","June","July","August","September","October","November","December"][e.substring(e.indexOf("-")+1,e.lastIndexOf("-"))-1]}}function i(e,n,t){for(let r=0;r<n.length;r++)if(n[r].childElementCount>t)if(n[r+1])for(let e=n[r].childElementCount-1;e>=t;e--)n[r+1].prepend(n[r].children[e]);else $(e).slick("slickAdd",'\n                    <div class="cards__group"></div>\n                '),i(e,n,t);else if(n[r].childElementCount<t&&n[r+1])for(let e=r+1;e<n.length&&n[r].childElementCount!==t;e++)for(;0!==n[e].childElementCount&&n[r].childElementCount!==t;)n[r].append(n[e].children[0]);for(let i=n.length-1;i>=0;i--)0===n[i].childElementCount&&$(e).slick("slickRemove",i)}var t,r;t=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(r=new Image).onload=r.onerror=function(){t(2==r.height)},r.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",$(document).ready((function(){const t=document.querySelector(".cards__container"),r=document.getElementsByClassName("cards__group"),o=document.querySelectorAll(".card");$(t).slick({arrows:!1,waitForAnimate:!0,infinite:!1,slidesToShow:1,initialSlide:0,variableHeight:!0});let c=document.querySelector(".slick-current").querySelectorAll(".card");document.addEventListener("click",(e=>{let n=e.target.closest(".card");n&&(c.forEach((e=>{e!==n&&e.classList.toggle("unactive")})),n.classList.toggle("active"),$(".card__weather-main, .wind__inf, .precipitation__inf").slick("refresh"))})),$(".cards__container").on("beforeChange",(()=>{c&&c.forEach((e=>{e.classList.remove("active","unactive")}))})),$(".cards__container").on("afterChange",(function(){c=document.querySelector(".slick-current").querySelectorAll(".card")})),$(".card__weather-main, .wind__inf, .precipitation__inf").slick({arrows:!1,waitForAnimate:!1,infinite:!1,slidesToShow:1,swipeToSlide:!0,variableWidth:!0,initialSlide:0,variableHeight:!0,touchThreshold:20}),$(".wind__inf, .card__weather-main, .precipitation__inf").on("mousedown",(e=>{e.stopPropagation()})),$(".wind__inf, .card__weather-main, .precipitation__inf").on("mouseup",(e=>{e.stopPropagation()})),$(".wind__inf, .card__weather-main, .precipitation__inf").on("touchmove",(e=>{e.stopPropagation()})),$(".wind__inf, .card__weather-main, .precipitation__inf").on("beforeChange",(e=>{e.stopPropagation()})),window.innerWidth<="576"?i(t,r,1):window.innerWidth<="992"?i(t,r,2):i(t,r,3),window.addEventListener("resize",(()=>{window.innerWidth<="576"?i(t,r,1):window.innerWidth<="992"?i(t,r,2):i(t,r,3)}));const s=function(){const e=new URL(location.href).searchParams.get("city-list");return""!==e&&null!==e?e:"kharkiv"}();!async function(){const i=`https://api.weatherapi.com/v1/forecast.json?key=08409313902344a8bd7230442221702&q=${s}&days=7&aqi=no&alerts=no`;let t=await fetch(i,{method:"GET"});if(t.ok){const r=document.querySelector(".screen-weather"),c=document.querySelectorAll(".card__heading"),a=document.querySelectorAll(".card__weather-main"),l=document.querySelectorAll(".weather__details"),d=document.querySelectorAll(".wind__inf"),_=document.querySelectorAll(".precipitation__inf");let u=await t.json(),m=u.location.name,p=u.location.country,g=Math.round(u.current.temp_c)+"°",h=u.current.condition.text;r.innerHTML=`\n            <div class="weather__place">\n                <p>${m}</p>\n                <p>${p}</p>\n            </div>\n            <div class="weather__inf">\n                <p>${g}</p>\n                <p>${h}</p>\n            </div>\n            `;const f=document.querySelector(":root"),w=document.querySelector(".second__screen-weather-background"),v=document.querySelector(".condition"),y=document.querySelector(".environment");console.log(h),"Patchy rain possible"!==h&&"Heavy rain at times"!==h&&"Fog"!==h&&"Mist"!==h&&"Partly cloudy"!==h&&"Moderate or heavy rain shower"!==h&&"Cloudy"!==h||(f.style.setProperty("--text-color","hsl(229, 38%, 27%)"),f.style.setProperty("--heading-color","hsl(229, 38%, 10%)"),w.innerHTML='\n                    <picture><source srcset="img/second_screen/weather_condition/rain_clouds/background.webp" type="image/webp"><img class="screen__background" src="img/second_screen/weather_condition/rain_clouds/background.png" alt=""></picture>\n                ',v.innerHTML='\n                <picture><source srcset="img/second_screen/weather_condition/rain_clouds/second_plan_cloud.webp" type="image/webp"><img class="screen__condition-cloud" src="img/second_screen/weather_condition/rain_clouds/second_plan_cloud.png" alt=""></picture>\n                <picture><source srcset="img/second_screen/weather_condition/rain_clouds/first_plan_cloud.webp" type="image/webp"><img class="screen__condition-cloud" src="img/second_screen/weather_condition/rain_clouds/first_plan_cloud.png" alt=""></picture>\n                '),y.innerHTML='\n            <picture><source srcset="img/second_screen/environment/mountains/mountain.webp" type="image/webp"><img class="screen__environment-mountain" src="img/second_screen/environment/mountains/mountain.png" alt=""></picture>\n            <picture><source srcset="img/second_screen/environment/mountains/forest.webp" type="image/webp"><img class="screen__environment-forest" src="img/second_screen/environment/mountains/forest.png" alt=""></picture>\n            <picture><source srcset="img/second_screen/environment/mountains/field.webp" type="image/webp"><img class="screen__environment-field" src="img/second_screen/environment/mountains/field.png" alt=""></picture>\n            ',console.log(y,"HTML",y.innerHTML,"IMGS",y.querySelectorAll("img"));const A=document.querySelector(".second__screen"),b=y.querySelectorAll("img"),S=[60,120,0],k=.05;let q=0,L=0,E=0,M=0;function C(){q+=(E-q)*k,L+=(M-L)*k;for(let e=0;e<b.length-1;e++)b[e].style.cssText=`transform: translate(${q/S[e]}%, ${L/S[e]}%) scale(1.05)`;requestAnimationFrame(C)}console.log(b,"for environment",S),C(),A.addEventListener("mousemove",(e=>{const n=A.offsetWidth,i=A.offsetHeight,t=e.pageX-n/2,r=e.pageY-i/2;E=t/n*100,M=r/i*100}));for(let T=0;T<a.length;T++)if(u.forecast.forecastday[T]){let H=u.forecast.forecastday[T].hour,x=n(u.forecast.forecastday[T].date);c[T].innerHTML=`\n                    <h3>\n                        ${x.month} ${x.day}\n                    </h3>\n                    `;let P=u.forecast.forecastday[T].day,I=P.avghumidity+"%",W=P.uv,F=P.avgvis_km+" km";l[T].innerHTML=`\n                    <h3 class="details__heading">\n                    Details\n                    </h3>\n                    <ul class="details__inf">\n                        <div class="details__inf-item">\n                            <li>Humidity</li>\n                            <li>${I}</li>\n                        </div>\n                        <div class="details__inf-item">\n                            <li>UV index</li>\n                            <li>${W}</li>\n                        </div>\n                        <div class="details__inf-item">\n                            <li>Visibility</li>\n                            <li>${F}</li>\n                        </div>\n                    </ul>\n                    `;for(let B=0;B<H.length;B++){let J=H[B].time.slice(-5),O=H[B].condition.icon,R=Math.round(H[B].temp_c)+"°",U=H[B].condition.text,j=H[B].wind_degree+90+"deg",G=H[B].wind_dir,N=H[B].wind_kph+" kph",V=H[B].precip_mm+" mm";$(a[T]).slick("slickAdd",`\n                            <div class="weather__inf">\n                                <div class="weather__time">\n                                    ${J}\n                                </div>\n                                <div class="weather__icon">\n                                    <img src=" ${O}" alt="">\n                                    <div class="weather__temp">${R}</div>\n                                </div>\n                                <div class="weather__text">\n                                    ${U}\n                                </div>\n                            </div>\n                        `),$(d[T]).slick("slickAdd",`\n                            <div class="wind__inf-item">\n                                <div class="weather__time">\n                                    ${J}\n                                </div>\n                                <img src="img/svg/wind.svg" class="wind__icon" style="transform: rotate(${j});">\n                                <div class="wind__text">\n                                    <p>${G}</p>\n                                    <p>${N}</p> \n                                </div>\n                            </div>\n                        `),$(_[T]).slick("slickAdd",`\n                            <div class="precipitation__inf-item">\n                                <div class="weather__time">\n                                    ${J}\n                                </div>\n                                <img src="img/svg/droplet.svg" class="precipitation__icon" alt="">\n                                <div class="precipitation__text">\n                                    ${V}\n                                </div>\n                            </div>\n                        `)}}else e(o[T],"No data")}else!function(n,i,t){e(n,t),i.forEach((n=>{e(n,t)}))}(weatherMain,o,t.status)}();const a=document.querySelector(".first__screen"),l=document.querySelector(".screen__sun");let d=0,_=0,u=0,m=0;!function e(){d+=.05*(u-d),_+=.05*(m-_),l.style.cssText=`transform: translate(${d/60}%, ${_/60}%);`,requestAnimationFrame(e)}(),a.addEventListener("mousemove",(e=>{const n=a.offsetWidth,i=a.offsetHeight,t=e.pageX-n/2,r=e.pageY-i/2;u=t/n*100,m=r/i*100}))}))})();