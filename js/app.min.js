(()=>{"use strict";function e(e,n){e.innerHTML=`<div style="padding : 40px;font-size: inherit;">Error: ${n}</div>`}function n(e){return{day:e.slice(e.lastIndexOf("-")+1),month:["January","February","March","April","May","June","July","August","September","October","November","December"][e.substring(e.indexOf("-")+1,e.lastIndexOf("-"))-1]}}function i(e,n,t){for(let r=0;r<n.length;r++)if(n[r].childElementCount>t)if(n[r+1])for(let e=n[r].childElementCount-1;e>=t;e--)n[r+1].prepend(n[r].children[e]);else $(e).slick("slickAdd",'\n                    <div class="cards__group"></div>\n                '),i(e,n,t);else if(n[r].childElementCount<t&&n[r+1])for(let e=r+1;e<n.length&&n[r].childElementCount!==t;e++)for(;0!==n[e].childElementCount&&n[r].childElementCount!==t;)n[r].append(n[e].children[0]);for(let i=n.length-1;i>=0;i--)0===n[i].childElementCount&&$(e).slick("slickRemove",i)}var t,r;t=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(r=new Image).onload=r.onerror=function(){t(2==r.height)},r.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",$(document).ready((function(){const t=document.querySelector(".cards__container"),r=document.getElementsByClassName("cards__group"),o=document.querySelectorAll(".card");$(t).slick({arrows:!1,waitForAnimate:!0,infinite:!1,slidesToShow:1,initialSlide:0,variableHeight:!0});let c=document.querySelector(".slick-current").querySelectorAll(".card");document.addEventListener("click",(e=>{let n=e.target.closest(".card");n&&(c.forEach((e=>{e!==n&&e.classList.toggle("unactive")})),n.classList.toggle("active"))})),$(".cards__container").on("beforeChange",(()=>{c&&c.forEach((e=>{e.classList.remove("active","unactive")}))})),$(".cards__container").on("afterChange",(function(){c=document.querySelector(".slick-current").querySelectorAll(".card")})),$(".card__weather-main, .wind__inf, .precipitation__inf").slick({arrows:!1,waitForAnimate:!0,infinite:!1,slidesToShow:1,initialSlide:0,variableHeight:!0}),$(".wind__inf, .card__weather-main, .precipitation__inf").on("mousedown",(e=>{e.stopPropagation()})),$(".wind__inf, .card__weather-main, .precipitation__inf").on("mouseup",(e=>{e.stopPropagation()})),$(".wind__inf, .card__weather-main, .precipitation__inf").on("beforeChange",(e=>{e.stopPropagation()})),window.innerWidth<="576"?i(t,r,1):window.innerWidth<="992"?i(t,r,2):i(t,r,3),window.addEventListener("resize",(()=>{window.innerWidth<="576"?i(t,r,1):window.innerWidth<="992"?i(t,r,2):i(t,r,3)}));const s=function(){const e=new URL(location.href).searchParams.get("city-list");return""!==e&&null!==e?e:"kharkiv"}();!async function(){const i=`//api.weatherapi.com/v1/forecast.json?key=08409313902344a8bd7230442221702&q=${s}&days=7&aqi=no&alerts=no`;let t=await fetch(i,{method:"GET"});if(t.ok){const r=document.querySelector(".screen-weather"),c=document.querySelectorAll(".card__heading"),a=document.querySelectorAll(".card__weather-main"),l=document.querySelectorAll(".weather__details"),d=document.querySelectorAll(".wind__inf"),u=document.querySelectorAll(".precipitation__inf");let _=await t.json(),m=_.location.name,p=_.location.country,g=Math.round(_.current.temp_c)+"°",f=_.current.condition.text;r.innerHTML=`\n            <div class="weather__place">\n                <p>${m}</p>\n                <p>${p}</p>\n            </div>\n            <div class="weather__inf">\n                <p>${g}</p>\n                <p>${f}</p>\n            </div>\n            `;const h=document.querySelector(":root"),v=document.querySelector(".second__screen-weather-background"),w=document.querySelector(".condition"),y=document.querySelector(".environment");console.log(f),"Patchy rain possible"!==f&&"Heavy rain at times"!==f&&"Fog"!==f&&"Mist"!==f&&"Partly cloudy"!==f&&"Moderate or heavy rain shower"!==f&&"Cloudy"!==f||(h.style.setProperty("--text-color","hsl(229, 38%, 27%)"),h.style.setProperty("--heading-color","hsl(229, 38%, 10%)"),v.innerHTML='\n                    <picture><source srcset="img/second_screen/weather_condition/rain_clouds/background.webp" type="image/webp"><img class="screen__background" src="img/second_screen/weather_condition/rain_clouds/background.png" alt=""></picture>\n                ',w.innerHTML='\n                <picture><source srcset="img/second_screen/weather_condition/rain_clouds/second_plan_cloud.webp" type="image/webp"><img class="screen__condition-cloud" src="img/second_screen/weather_condition/rain_clouds/second_plan_cloud.png" alt=""></picture>\n                <picture><source srcset="img/second_screen/weather_condition/rain_clouds/first_plan_cloud.webp" type="image/webp"><img class="screen__condition-cloud" src="img/second_screen/weather_condition/rain_clouds/first_plan_cloud.png" alt=""></picture>\n                '),y.innerHTML='\n            <picture><source srcset="img/second_screen/environment/mountains/mountain.webp" type="image/webp"><img class="screen__environment-mountain" src="img/second_screen/environment/mountains/mountain.png" alt=""></picture>\n            <picture><source srcset="img/second_screen/environment/mountains/forest.webp" type="image/webp"><img class="screen__environment-forest" src="img/second_screen/environment/mountains/forest.png" alt=""></picture>\n            <picture><source srcset="img/second_screen/environment/mountains/field.webp" type="image/webp"><img class="screen__environment-field" src="img/second_screen/environment/mountains/field.png" alt=""></picture>\n            ',console.log(y,"HTML",y.innerHTML,"IMGS",y.querySelectorAll("img"));const A=document.querySelector(".second__screen"),b=y.querySelectorAll("img"),S=[60,120,0],k=.05;let q=0,L=0,E=0,M=0;function C(){q+=(E-q)*k,L+=(M-L)*k;for(let e=0;e<b.length-1;e++)b[e].style.cssText=`transform: translate(${q/S[e]}%, ${L/S[e]}%) scale(1.05)`;requestAnimationFrame(C)}console.log(b,"for environment",S),C(),A.addEventListener("mousemove",(e=>{const n=A.offsetWidth,i=A.offsetHeight,t=e.pageX-n/2,r=e.pageY-i/2;E=t/n*100,M=r/i*100}));for(let H=0;H<a.length;H++)if(_.forecast.forecastday[H]){let T=0,x=_.forecast.forecastday[H].hour,P=n(_.forecast.forecastday[H].date);c[H].innerHTML=`\n                    <h3>\n                        ${P.month} ${P.day}\n                    </h3>\n                    `;let I=_.forecast.forecastday[H].day,W=I.avghumidity+"%",F=I.uv,B=I.avgvis_km+" km";l[H].innerHTML=`\n                    <h3 class="details__heading">\n                    Details\n                    </h3>\n                    <ul class="details__inf">\n                        <div class="details__inf-item">\n                            <li>Humidity</li>\n                            <li>${W}</li>\n                        </div>\n                        <div class="details__inf-item">\n                            <li>UV index</li>\n                            <li>${F}</li>\n                        </div>\n                        <div class="details__inf-item">\n                            <li>Visibility</li>\n                            <li>${B}</li>\n                        </div>\n                    </ul>\n                    `;for(let J=0;J<x.length;J++){T+=.2*J+"s";let O=x[J].time.slice(-5),R=x[J].condition.icon,U=Math.round(x[J].temp_c)+"°",j=x[J].condition.text,G=x[J].wind_degree+90+"deg",N=x[J].wind_dir,V=x[J].wind_kph+" kph",X=x[J].precip_mm+" mm";$(a[H]).slick("slickAdd",`\n                            <div class="weather__inf" style="animation: slide-app ${T} linear;">\n                                <div class="weather__time">\n                                    ${O}\n                                </div>\n                                <div class="weather__icon">\n                                    <img src=" ${R}" alt="">\n                                    <div class="weather__temp">${U}</div>\n                                </div>\n                                <div class="weather__text">\n                                    ${j}\n                                </div>\n                            </div>\n                        `),$(d[H]).slick("slickAdd",`\n                            <div class="wind__inf-item" style="animation: slide-app ${T} linear;">\n                                <div class="weather__time">\n                                    ${O}\n                                </div>\n                                <img src="img/svg/wind.svg" class="wind__icon" style="transform: rotate(${G});">\n                                <div class="wind__text">\n                                    <p>${N}</p>\n                                    <p>${V}</p> \n                                </div>\n                            </div>\n                        `),$(u[H]).slick("slickAdd",`\n                            <div class="precipitation__inf-item" style="animation: slide-app ${T} linear;">\n                                <div class="weather__time">\n                                    ${O}\n                                </div>\n                                <img src="img/svg/droplet.svg" class="precipitation__icon" alt="">\n                                <div class="precipitation__text">\n                                    ${X}\n                                </div>\n                            </div>\n                        `)}}else e(o[H],"No data")}else!function(n,i,t){e(n,t),i.forEach((n=>{e(n,t)}))}(weatherMain,o,t.status)}();const a=document.querySelector(".first__screen"),l=document.querySelector(".screen__sun");let d=0,u=0,_=0,m=0;!function e(){d+=.05*(_-d),u+=.05*(m-u),l.style.cssText=`transform: translate(${d/60}%, ${u/60}%);`,requestAnimationFrame(e)}(),a.addEventListener("mousemove",(e=>{const n=a.offsetWidth,i=a.offsetHeight,t=e.pageX-n/2,r=e.pageY-i/2;_=t/n*100,m=r/i*100}))}))})();
